# GameEngine Tests

## üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

### –°–ø–æ—Å–æ–± 1: –ò–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ build
```bash
cd GameEngine/build
make test
```

### –°–ø–æ—Å–æ–± 2: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Python
```bash
cd GameEngine/build
python3 ../tests/run_all_tests.py
```

### –°–ø–æ—Å–æ–± 3: –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
```bash
cd GameEngine
python3 tests/run_all_tests.py
```

## üß™ –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### 1. Python —Ç–µ—Å—Ç—ã (test_*.py)
- `test_cli_basic.py` - –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å CLI
- `test_projects.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏

### 2. –°–∫—Ä–∏–ø—Ç–æ–≤—ã–µ —Ç–µ—Å—Ç—ã (*.txt)
- `basic_cli_test.txt` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `test_entities.txt` - —Ä–∞–±–æ—Ç–∞ —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- `test_scene_management.txt` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞–º–∏

### 3. –ö–æ–º–∞–Ω–¥–Ω—ã–µ —Ç–µ—Å—Ç—ã
–í—Å—Ç—Ä–æ–µ–Ω—ã –≤ `run_all_tests.py` - —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### 4. C++ —Ç–µ—Å—Ç—ã –¥–ª—è ResourceManager
- `test_resource_manager_safety.cpp` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π
- `test_resource_manager_threading.cpp` - –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- `test_resource_manager_headless.cpp` - —Ä–∞–±–æ—Ç–∞ –≤ headless —Ä–µ–∂–∏–º–µ

## üìù –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### Python —Ç–µ—Å—Ç
```bash
cd build
python3 ../tests/test_cli_basic.py
```

### –°–∫—Ä–∏–ø—Ç–æ–≤—ã–π —Ç–µ—Å—Ç
```bash
cd build
./game --json --script ../tests/basic_cli_test.txt
```

### –û–¥–∏–Ω–æ—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
```bash
cd build
./game --json --command "help"
```

### C++ —Ç–µ—Å—Ç—ã ResourceManager
```bash
cd tests
./compile_and_run_tests.sh  # –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç, –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏ –æ—á–∏—â–∞–µ—Ç
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
g++ -std=c++20 test_resource_manager_safety.cpp ../src/resources/resource_manager.cpp \
    -I../src -I../build/_deps/raylib-src/src -I../build/_deps/spdlog-src/include \
    -I../build/_deps/entt-src/src -I../build/_deps/glm-src \
    -L../build -L../build/_deps/raylib-build/raylib -lraylib \
    -framework OpenGL -framework Cocoa -framework IOKit \
    -framework CoreVideo -framework CoreFoundation \
    -o test_resource_manager_safety
./test_resource_manager_safety
```

## üßπ –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
python3 tests/clean_test_data.py          # –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
./tests/clean_test_executables.sh  # –û—á–∏—Å—Ç–∫–∞ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
```

- `clean_test_data.py` - —É–¥–∞–ª—è–µ—Ç –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã (–Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `test_`, `cli_test`, etc.)
- `clean_test_executables.sh` - —É–¥–∞–ª—è–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

1. **`test_log_YYYYMMDD_HHMMSS.log`** - –ø–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
   - –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ (—Å—Ç–∞—Ä—Ç, —Ñ–∏–Ω–∏—à, —Å—Ç–∞—Ç—É—Å)
   - –î–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ stdout/stderr –¥–ª—è —É–ø–∞–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤
   - –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å—Ç–µ–∫–∞ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π
   - –¢–∞–±–ª–∏—Ü–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

2. **`test_results.json`** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö/–ø—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
   - –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### –û–ø—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
python3 tests/run_all_tests.py

# Verbose —Ä–µ–∂–∏–º - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
python3 tests/run_all_tests.py --verbose

# –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–æ–ª–Ω—ã–µ —Å–±–æ—Ä–∫–∏)
python3 tests/run_all_tests.py --skip-full-build
```

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥-—Ñ–∞–π–ª–∞

```
GameEngine Test Suite Execution Log
================================================================================
Start Time: 2025-06-11 22:13:59
Python Version: 3.13.1
Platform: darwin
Working Directory: /path/to/build
Skip Full Build: False
Verbose Mode: False
================================================================================

[2025-06-11 22:13:59.058] [INFO    ] ============================================================
[2025-06-11 22:13:59.058] [INFO    ] TEST START: test_categories.py (1/43)
[2025-06-11 22:13:59.058] [INFO    ] Type: Python Test
[2025-06-11 22:13:59.058] [INFO    ] File: ../tests/test_categories.py
[2025-06-11 22:13:59.058] [INFO    ] ============================================================
[2025-06-11 22:13:59.083] [SUCCESS ] TEST PASSED: test_categories.py
[2025-06-11 22:13:59.083] [INFO    ] Duration: 0.02 seconds
```

### –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ —É–ø–∞–≤—à–∏–µ —Ç–µ—Å—Ç—ã
grep "TEST FAILED" test_log_*.log

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–Ω—É—é –æ—à–∏–±–∫—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
grep -A 50 "TEST FAILED: test_name.py" test_log_*.log

# –ù–∞–π—Ç–∏ —Å–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
grep -E "Duration: [0-9.]+ seconds" test_log_*.log | sort -k3 -n -r | head -10

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–∞–π–º–∞—É—Ç—ã
grep "TEST TIMEOUT" test_log_*.log
```

## ‚úçÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### Python —Ç–µ—Å—Ç
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test_feature.py` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `tests/`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `run_command()` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `assert` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫
4. –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –∫–æ–¥ 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, 1 –ø—Ä–∏ –æ—à–∏–±–∫–µ

### –°–∫—Ä–∏–ø—Ç–æ–≤—ã–π —Ç–µ—Å—Ç
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test_feature.txt` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `tests/`
2. –ü–∏—à–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `#` –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
4. –¢–µ—Å—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–º –µ—Å–ª–∏ –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

–¢–µ—Å—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ exit –∫–æ–¥—ã:
- 0 - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏
- 1 - –µ—Å—Ç—å –ø—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–ü—Ä–∏–º–µ—Ä –¥–ª—è GitHub Actions:
```yaml
- name: Build
  run: |
    mkdir build && cd build
    cmake ..
    make

- name: Run tests
  run: |
    cd build
    make test
```

## üìà –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:
- ‚úÖ CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –æ–ø—Ü–∏–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞–º–∏
- ‚úÖ Batch –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- ‚úÖ –°–∫—Ä–∏–ø—Ç–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- ‚ö†Ô∏è –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è (TODO)
- ‚ö†Ô∏è –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ (TODO)
- ‚ö†Ô∏è Play mode (TODO)